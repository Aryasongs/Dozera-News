<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>Dozera News - New York's Premier News Source</title>
    <meta name="description" content="Stay informed with Dozera News - New York's trusted source for politics, business, sports, and local news.">
    <meta name="keywords" content="New York news, politics, business, sports, local news, breaking news">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Source+Sans+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        .font-headline { font-family: 'Playfair Display', serif; }
        .font-body { font-family: 'Source Sans Pro', sans-serif; }
        .secret-admin-trigger {
            position: absolute;
            top: 0;
            left: 0;
            width: 20px;
            height: 20px;
            opacity: 0;
            cursor: pointer;
            z-index: 1000;
        }
        .admin-panel-hidden { display: none; }
        .user-panel-hidden { display: none; }
        .news-card:hover {
            transform: translateY(-2px);
            transition: transform 0.3s ease;
        }
        .provider-btn {
            transition: all 0.3s ease;
        }
        .provider-btn:hover {
            transform: scale(1.05);
        }
        .breaking-news {
            background: linear-gradient(90deg, #dc2626, #b91c1c);
            animation: pulse 2s infinite;
        }
        .featured-article {
            border-left: 4px solid #dc2626;
        }
        .article-meta {
            font-size: 0.875rem;
            color: #6b7280;
        }
        .category-politics { background-color: #3b82f6; }
        .category-business { background-color: #10b981; }
        .category-sports { background-color: #f59e0b; }
        .category-local { background-color: #8b5cf6; }
        .category-breaking { background-color: #dc2626; }
        
        .status-pending { background-color: #fbbf24; color: #92400e; }
        .status-approved { background-color: #10b981; color: #065f46; }
        .status-rejected { background-color: #ef4444; color: #991b1b; }
        .status-draft { background-color: #6b7280; color: #374151; }
    </style>
</head>
<body class="bg-gray-50 font-body">
    <!-- Secret Admin Trigger (invisible) -->
    <div class="secret-admin-trigger" onclick="handleSecretClick()"></div>
    
    <!-- Top Bar -->
    <div class="bg-black text-white text-sm py-2">
        <div class="max-w-7xl mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <span id="current-date"></span>
                <span class="text-gray-400">|</span>
                <span>New York, NY</span>
            </div>
            <div class="flex items-center space-x-4">
                <div id="user-auth-section">
                    <button onclick="showUserLogin()" class="text-white hover:text-gray-300 transition duration-200">
                        <i class="fas fa-user mr-1"></i>Sign In
                    </button>
                </div>
                <div id="user-logged-in-section" class="hidden">
                    <span class="text-gray-300">Welcome, <span id="user-display-name"></span></span>
                    <button onclick="showUserDashboard()" class="ml-3 text-white hover:text-gray-300">
                        <i class="fas fa-tachometer-alt mr-1"></i>Dashboard
                    </button>
                    <button onclick="userLogout()" class="ml-3 text-white hover:text-gray-300">
                        <i class="fas fa-sign-out-alt mr-1"></i>Logout
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Breaking News Ticker -->
    <div class="breaking-news text-white py-2 overflow-hidden">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center">
                <span class="bg-white text-red-600 px-3 py-1 text-xs font-bold rounded mr-4">BREAKING</span>
                <div class="flex-1 whitespace-nowrap">
                    <span class="animate-pulse">NYC Infrastructure Plan Approved • Wall Street Hits Record High • Yankees Advance to Playoffs</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Header -->
    <header class="bg-white border-b-2 border-black">
        <div class="max-w-7xl mx-auto px-4 py-6">
            <div class="text-center">
                <h1 class="font-headline text-6xl font-black text-black mb-2">Dozera News</h1>
                <p class="text-sm text-gray-600 font-medium tracking-wider uppercase">New York's Premier News Source</p>
                <div class="mt-4 text-xs text-gray-500">
                    <span>Founded 2024</span>
                    <span class="mx-2">•</span>
                    <span>All The News That's Fit To Print</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white border-b border-gray-200 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-center items-center py-3">
                <div class="flex items-center space-x-8">
                    <button onclick="showCategory('all')" class="nav-link text-black hover:text-red-600 font-semibold text-sm uppercase tracking-wide border-b-2 border-transparent hover:border-red-600 pb-1 transition duration-200">Home</button>
                    <button onclick="showCategory('politics')" class="nav-link text-black hover:text-red-600 font-semibold text-sm uppercase tracking-wide border-b-2 border-transparent hover:border-red-600 pb-1 transition duration-200">Politics</button>
                    <button onclick="showCategory('business')" class="nav-link text-black hover:text-red-600 font-semibold text-sm uppercase tracking-wide border-b-2 border-transparent hover:border-red-600 pb-1 transition duration-200">Business</button>
                    <button onclick="showCategory('sports')" class="nav-link text-black hover:text-red-600 font-semibold text-sm uppercase tracking-wide border-b-2 border-transparent hover:border-red-600 pb-1 transition duration-200">Sports</button>
                    <button onclick="showCategory('local')" class="nav-link text-black hover:text-red-600 font-semibold text-sm uppercase tracking-wide border-b-2 border-transparent hover:border-red-600 pb-1 transition duration-200">Local</button>
                    <button onclick="showCategory('opinion')" class="nav-link text-black hover:text-red-600 font-semibold text-sm uppercase tracking-wide border-b-2 border-transparent hover:border-red-600 pb-1 transition duration-200">Opinion</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 py-8">
        <!-- Featured Story -->
        <section class="mb-12">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2">
                    <div class="featured-article bg-white p-8 shadow-sm">
                        <div class="mb-4">
                            <span class="category-politics text-white px-3 py-1 text-xs font-bold rounded uppercase">Politics</span>
                        </div>
                        <h2 class="font-headline text-4xl font-bold text-black mb-4 leading-tight">NYC Mayor Announces Comprehensive Infrastructure Overhaul</h2>
                        <p class="text-lg text-gray-700 mb-6 leading-relaxed">A groundbreaking $50 billion initiative promises to transform New York City's aging infrastructure, focusing on transportation, utilities, and digital connectivity for the next decade.</p>
                        <div class="article-meta flex items-center space-x-4">
                            <span>By <strong>Sarah Johnson</strong></span>
                            <span>•</span>
                            <span>Today, 2:30 PM</span>
                            <span>•</span>
                            <span>5 min read</span>
                        </div>
                    </div>
                </div>
                <div class="space-y-6">
                    <div class="bg-white p-6 shadow-sm">
                        <span class="category-business text-white px-2 py-1 text-xs font-bold rounded uppercase">Business</span>
                        <h3 class="font-headline text-xl font-bold mt-3 mb-2">Wall Street Reaches New Heights</h3>
                        <p class="text-gray-600 text-sm mb-3">Record trading volumes signal investor confidence in economic recovery.</p>
                        <div class="article-meta">
                            <span>By Michael Chen • 1 hour ago</span>
                        </div>
                    </div>
                    <div class="bg-white p-6 shadow-sm">
                        <span class="category-sports text-white px-2 py-1 text-xs font-bold rounded uppercase">Sports</span>
                        <h3 class="font-headline text-xl font-bold mt-3 mb-2">Yankees Clinch Division Title</h3>
                        <p class="text-gray-600 text-sm mb-3">Dominant performance secures playoff berth for the Bronx Bombers.</p>
                        <div class="article-meta">
                            <span>By David Rodriguez • 3 hours ago</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- News Grid -->
        <section id="news-container">
            <div class="border-t-2 border-black pt-8">
                <h2 class="font-headline text-3xl font-bold text-black mb-8">Latest News</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="news-grid">
                    <!-- News articles will be loaded here -->
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-black text-white mt-16">
        <div class="max-w-7xl mx-auto px-4 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="font-headline text-2xl font-bold mb-4">Dozera News</h3>
                    <p class="text-gray-400 text-sm">New York's premier source for breaking news, politics, business, and local stories.</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Sections</h4>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li><a href="#" class="hover:text-white">Politics</a></li>
                        <li><a href="#" class="hover:text-white">Business</a></li>
                        <li><a href="#" class="hover:text-white">Sports</a></li>
                        <li><a href="#" class="hover:text-white">Local</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Company</h4>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li><button onclick="showPage('about')" class="hover:text-white text-left">About Us</button></li>
                        <li><button onclick="showPage('careers')" class="hover:text-white text-left">Careers</button></li>
                        <li><button onclick="showPage('privacy')" class="hover:text-white text-left">Privacy Policy</button></li>
                        <li><button onclick="showPage('terms')" class="hover:text-white text-left">Terms & Conditions</button></li>
                        <li><button onclick="showPage('community')" class="hover:text-white text-left">Community Guidelines</button></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Follow Us</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-twitter text-xl"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-facebook text-xl"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-instagram text-xl"></i></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-sm text-gray-400">
                <p>&copy; 2024 Dozera News. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Full Screen Article View -->
    <div id="article-view" class="fixed inset-0 bg-gray-50 z-50 hidden overflow-y-auto">
        <!-- Article Header -->
        <div class="bg-white border-b-2 border-black sticky top-0 z-10">
            <div class="max-w-6xl mx-auto px-4 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-4">
                        <button onclick="closeArticleView()" class="text-gray-600 hover:text-gray-800 p-2 rounded-full hover:bg-gray-100">
                            <i class="fas fa-arrow-left text-xl"></i>
                        </button>
                        <div class="font-headline text-2xl font-black text-black">Dozera News</div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button onclick="shareArticle()" class="text-gray-600 hover:text-gray-800 p-2 rounded-full hover:bg-gray-100">
                            <i class="fas fa-share text-lg"></i>
                        </button>
                        <button onclick="bookmarkArticle()" class="text-gray-600 hover:text-gray-800 p-2 rounded-full hover:bg-gray-100">
                            <i class="fas fa-bookmark text-lg"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Article Content -->
        <div class="max-w-4xl mx-auto px-4 py-8">
            <article class="bg-white rounded-lg shadow-sm overflow-hidden">
                <!-- Article Header -->
                <div class="p-8 pb-6">
                    <div class="mb-4">
                        <span id="article-category" class="px-3 py-1 text-xs font-bold text-white rounded uppercase bg-blue-600">Category</span>
                    </div>
                    <h1 id="article-title" class="font-headline text-4xl lg:text-5xl font-bold text-black mb-6 leading-tight">Article Title</h1>
                    <p id="article-summary" class="text-xl text-gray-700 mb-6 leading-relaxed font-medium">Article summary will appear here...</p>
                    
                    <!-- Article Meta -->
                    <div class="flex items-center justify-between py-4 border-t border-b border-gray-200">
                        <div class="flex items-center space-x-4">
                            <div class="flex items-center">
                                <div id="article-author-avatar" class="h-12 w-12 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold mr-3">A</div>
                                <div>
                                    <p class="font-semibold text-gray-900" id="article-author">Author Name</p>
                                    <p class="text-sm text-gray-600" id="article-date">Date</p>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-6 text-sm text-gray-600">
                            <span id="article-read-time">5 min read</span>
                            <span id="article-views">1,234 views</span>
                        </div>
                    </div>
                </div>

                <!-- Article Image (if exists) -->
                <div id="article-image-container" class="hidden">
                    <img id="article-image" src="" alt="" class="w-full h-96 object-cover">
                </div>

                <!-- Article Body -->
                <div class="p-8 pt-6">
                    <div id="article-content" class="prose prose-lg max-w-none">
                        <!-- Article content will be loaded here -->
                    </div>
                    
                    <!-- Article Tags -->
                    <div id="article-tags-container" class="mt-8 pt-6 border-t border-gray-200">
                        <h4 class="text-sm font-semibold text-gray-900 mb-3">Tags</h4>
                        <div id="article-tags" class="flex flex-wrap gap-2">
                            <!-- Tags will be loaded here -->
                        </div>
                    </div>
                </div>
            </article>

            <!-- Related Articles -->
            <div class="mt-8">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Related Articles</h3>
                <div id="related-articles" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Related articles will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Static Pages -->
    <div id="page-overlay" class="fixed inset-0 bg-gray-100 z-50 hidden overflow-y-auto">
        <!-- Page Header -->
        <div class="bg-white border-b-2 border-black">
            <div class="max-w-4xl mx-auto px-4 py-6">
                <div class="flex justify-between items-center">
                    <h1 id="page-title" class="font-headline text-4xl font-black text-black">Page Title</h1>
                    <button onclick="closePage()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Page Content -->
        <div class="max-w-4xl mx-auto px-4 py-8">
            <div class="bg-white rounded-lg shadow-sm p-8">
                <div id="page-content" class="prose max-w-none">
                    <!-- Page content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- User Login Modal -->
    <div id="user-login-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg max-w-md w-full p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-900">Sign In to Dozera News</h3>
                    <button onclick="closeUserModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <!-- Firebase Auth Providers -->
                <div id="user-auth-providers" class="space-y-3">
                    <button onclick="userSignInWithGoogle()" class="provider-btn w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md hover:bg-gray-50">
                        <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google" class="w-5 h-5 mr-3">
                        <span class="font-medium">Continue with Google</span>
                    </button>
                    
                    <button onclick="userSignInWithGitHub()" class="provider-btn w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md hover:bg-gray-50">
                        <i class="fab fa-github text-xl mr-3"></i>
                        <span class="font-medium">Continue with GitHub</span>
                    </button>
                    
                    <button onclick="userSignInWithTwitter()" class="provider-btn w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md hover:bg-gray-50">
                        <i class="fab fa-twitter text-xl mr-3 text-blue-400"></i>
                        <span class="font-medium">Continue with Twitter</span>
                    </button>
                    
                    <button onclick="showUserEmailAuth()" class="provider-btn w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md hover:bg-gray-50">
                        <i class="fas fa-envelope text-xl mr-3 text-gray-600"></i>
                        <span class="font-medium">Continue with Email</span>
                    </button>
                    
                    <button onclick="userSignInWithPhone()" class="provider-btn w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md hover:bg-gray-50">
                        <i class="fas fa-phone text-xl mr-3 text-green-600"></i>
                        <span class="font-medium">Continue with Phone</span>
                    </button>
                    
                    <button onclick="userSignInAnonymously()" class="provider-btn w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md hover:bg-gray-50">
                        <i class="fas fa-user-secret text-xl mr-3 text-gray-600"></i>
                        <span class="font-medium">Continue as Guest</span>
                    </button>
                </div>

                <!-- Email Auth Form -->
                <div id="user-email-auth-form" class="hidden">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                            <input type="email" id="user-email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                            <input type="password" id="user-password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div class="flex space-x-3">
                            <button onclick="userSignInWithEmail()" class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition duration-200">Sign In</button>
                            <button onclick="userSignUpWithEmail()" class="flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition duration-200">Sign Up</button>
                        </div>
                        <button onclick="showUserAuthProviders()" class="w-full text-sm text-blue-600 hover:text-blue-800">← Back to providers</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="admin-login-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg max-w-md w-full p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-900">Admin Access</h3>
                    <button onclick="closeAdminModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <!-- Access Code Input -->
                <div id="access-code-step" class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Enter Access Code</label>
                    <input type="password" id="access-code" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Access Code">
                    <button onclick="verifyAccessCode()" class="w-full mt-3 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition duration-200">Verify Code</button>
                </div>

                <!-- Firebase Auth Providers -->
                <div id="admin-auth-providers-step" class="hidden">
                    <p class="text-sm text-gray-600 mb-4">Choose your authentication method:</p>
                    
                    <div class="space-y-3">
                        <button onclick="adminSignInWithGoogle()" class="provider-btn w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md hover:bg-gray-50">
                            <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google" class="w-5 h-5 mr-3">
                            <span class="font-medium">Continue with Google</span>
                        </button>
                        
                        <button onclick="adminSignInWithGitHub()" class="provider-btn w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md hover:bg-gray-50">
                            <i class="fab fa-github text-xl mr-3"></i>
                            <span class="font-medium">Continue with GitHub</span>
                        </button>
                        
                        <button onclick="adminSignInWithTwitter()" class="provider-btn w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md hover:bg-gray-50">
                            <i class="fab fa-twitter text-xl mr-3 text-blue-400"></i>
                            <span class="font-medium">Continue with Twitter</span>
                        </button>
                        
                        <button onclick="showAdminEmailAuth()" class="provider-btn w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md hover:bg-gray-50">
                            <i class="fas fa-envelope text-xl mr-3 text-gray-600"></i>
                            <span class="font-medium">Continue with Email</span>
                        </button>
                        
                        <button onclick="adminSignInWithPhone()" class="provider-btn w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md hover:bg-gray-50">
                            <i class="fas fa-phone text-xl mr-3 text-green-600"></i>
                            <span class="font-medium">Continue with Phone</span>
                        </button>
                        
                        <button onclick="adminSignInAnonymously()" class="provider-btn w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md hover:bg-gray-50">
                            <i class="fas fa-user-secret text-xl mr-3 text-gray-600"></i>
                            <span class="font-medium">Continue Anonymously</span>
                        </button>
                    </div>
                </div>

                <!-- Email Auth Form -->
                <div id="admin-email-auth-form" class="hidden">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                            <input type="email" id="admin-email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                            <input type="password" id="admin-password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div class="flex space-x-3">
                            <button onclick="adminSignInWithEmail()" class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition duration-200">Sign In</button>
                            <button onclick="adminSignUpWithEmail()" class="flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition duration-200">Sign Up</button>
                        </div>
                        <button onclick="showAdminAuthProviders()" class="w-full text-sm text-blue-600 hover:text-blue-800">← Back to providers</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- User Dashboard -->
    <div id="user-panel" class="user-panel-hidden fixed inset-0 bg-gray-100 z-40">
        <!-- User Sidebar -->
        <div class="bg-white w-64 h-full shadow-lg fixed left-0 top-0 z-50">
            <div class="p-6 border-b">
                <h2 class="text-xl font-bold text-gray-900">User Dashboard</h2>
                <p class="text-sm text-gray-600" id="user-panel-name">Welcome back!</p>
            </div>
            
            <nav class="mt-6">
                <button onclick="showUserSection('my-articles')" class="user-nav-btn w-full text-left px-6 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-900 border-l-4 border-transparent hover:border-blue-500">
                    <i class="fas fa-newspaper mr-3"></i>My Articles
                </button>
                <button onclick="showUserSection('write-article')" class="user-nav-btn w-full text-left px-6 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-900 border-l-4 border-transparent hover:border-blue-500">
                    <i class="fas fa-pen mr-3"></i>Write Article
                </button>
                <button onclick="showUserSection('profile')" class="user-nav-btn w-full text-left px-6 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-900 border-l-4 border-transparent hover:border-blue-500">
                    <i class="fas fa-user mr-3"></i>Profile
                </button>
                <button onclick="showUserSection('connections')" class="user-nav-btn w-full text-left px-6 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-900 border-l-4 border-transparent hover:border-blue-500">
                    <i class="fas fa-users mr-3"></i>Connections
                </button>
            </nav>
            
            <div class="absolute bottom-0 left-0 right-0 p-6 border-t">
                <button onclick="hideUserPanel()" class="w-full bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 transition duration-200 mb-2">
                    <i class="fas fa-arrow-left mr-2"></i>Back to Site
                </button>
                <button onclick="userLogout()" class="w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition duration-200">
                    <i class="fas fa-sign-out-alt mr-2"></i>Logout
                </button>
            </div>
        </div>

        <!-- User Content -->
        <div class="ml-64 p-8">
            <!-- My Articles Section -->
            <div id="user-my-articles" class="user-section">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">My Articles</h3>
                <div class="bg-white rounded-lg shadow overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="user-articles-table" class="bg-white divide-y divide-gray-200">
                            <!-- User articles will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Write Article Section -->
            <div id="user-write-article" class="user-section hidden">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Write New Article</h3>
                
                <!-- Permission Check -->
                <div id="permission-required" class="bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6">
                    <div class="flex items-center">
                        <i class="fas fa-exclamation-triangle text-yellow-600 text-xl mr-3"></i>
                        <div>
                            <h4 class="text-lg font-semibold text-yellow-800">Permission Required</h4>
                            <p class="text-yellow-700 mt-1">You need admin approval to create articles. Click below to request permission.</p>
                            <button onclick="requestCreationPermission()" class="mt-3 bg-yellow-600 text-white px-4 py-2 rounded-md hover:bg-yellow-700">
                                Request Permission
                            </button>
                        </div>
                    </div>
                </div>

                <div id="article-form-container" class="hidden">
                    <div class="bg-white rounded-lg shadow p-6">
                        <form id="user-article-form" class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                                <input type="text" id="user-article-title" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                                    <select id="user-article-category" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="politics">Politics</option>
                                        <option value="business">Business</option>
                                        <option value="sports">Sports</option>
                                        <option value="local">Local</option>
                                        <option value="opinion">Opinion</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Tags</label>
                                    <input type="text" id="user-article-tags" placeholder="Separate tags with commas" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Summary</label>
                                <textarea id="user-article-summary" rows="3" placeholder="Brief summary of your article..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Content</label>
                                <textarea id="user-article-content" rows="15" placeholder="Write your article content here..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                                <p class="text-sm text-gray-500 mt-1">Note: Only admins can add images to articles. Contact admin if you need images included.</p>
                            </div>
                            
                            <div class="flex space-x-4">
                                <button type="button" onclick="saveUserArticle('draft')" class="bg-gray-600 text-white px-6 py-2 rounded-md hover:bg-gray-700 transition duration-200">
                                    <i class="fas fa-save mr-2"></i>Save as Draft
                                </button>
                                <button type="button" onclick="saveUserArticle('pending')" class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition duration-200">
                                    <i class="fas fa-paper-plane mr-2"></i>Submit for Review
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Profile Section -->
            <div id="user-profile" class="user-section hidden">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Profile Settings</h3>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Profile Info -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-semibold mb-4">Profile Information</h4>
                        <div class="space-y-6">
                            <div class="text-center">
                                <div class="h-20 w-20 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold text-2xl mx-auto mb-4">
                                    <span id="user-avatar-initials">U</span>
                                </div>
                                <div class="flex items-center justify-center">
                                    <span class="text-lg font-medium" id="profile-display-name">User Name</span>
                                    <div id="user-verification-badge" class="hidden ml-2">
                                        <svg class="w-5 h-5 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Display Name</label>
                                <input type="text" id="user-display-name-input" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Bio</label>
                                <textarea id="user-bio" rows="4" placeholder="Tell us about yourself..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                            </div>
                            <button onclick="updateUserProfile()" class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition duration-200">
                                <i class="fas fa-save mr-2"></i>Update Profile
                            </button>
                        </div>
                    </div>

                    <!-- User Stats & Score -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-semibold mb-4">Your Statistics</h4>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-4 bg-blue-50 rounded-lg">
                                <div>
                                    <p class="text-sm text-gray-600">User Score</p>
                                    <p class="text-2xl font-bold text-blue-600" id="user-score">75</p>
                                </div>
                                <div class="w-16 h-16">
                                    <div class="relative w-16 h-16">
                                        <svg class="w-16 h-16 transform -rotate-90" viewBox="0 0 36 36">
                                            <path class="text-gray-300" stroke="currentColor" stroke-width="3" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                                            <path class="text-blue-600" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="75, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
                                        </svg>
                                        <div class="absolute inset-0 flex items-center justify-center">
                                            <span class="text-sm font-bold text-blue-600">75%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div class="text-center p-3 bg-green-50 rounded-lg">
                                    <p class="text-2xl font-bold text-green-600">8</p>
                                    <p class="text-sm text-gray-600">Articles Published</p>
                                </div>
                                <div class="text-center p-3 bg-purple-50 rounded-lg">
                                    <p class="text-2xl font-bold text-purple-600">156</p>
                                    <p class="text-sm text-gray-600">Total Views</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- User Connections Section -->
            <div id="user-connections" class="user-section hidden">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Connect with Other Users</h3>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Other Users -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-semibold mb-4">Other Writers</h4>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-4 border rounded-lg">
                                <div class="flex items-center">
                                    <div class="h-12 w-12 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold mr-4">JD</div>
                                    <div>
                                        <div class="flex items-center">
                                            <p class="font-medium">John Doe</p>
                                            <svg class="w-4 h-4 ml-1 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                            </svg>
                                        </div>
                                        <p class="text-sm text-gray-600">Score: 85 • 12 articles</p>
                                    </div>
                                </div>
                                <button onclick="viewOtherUserProfile('user1')" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 text-sm">
                                    View Profile
                                </button>
                            </div>
                            
                            <div class="flex items-center justify-between p-4 border rounded-lg">
                                <div class="flex items-center">
                                    <div class="h-12 w-12 rounded-full bg-purple-500 flex items-center justify-center text-white font-bold mr-4">JS</div>
                                    <div>
                                        <p class="font-medium">Jane Smith</p>
                                        <p class="text-sm text-gray-600">Score: 42 • 3 articles</p>
                                    </div>
                                </div>
                                <button onclick="viewOtherUserProfile('user2')" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 text-sm">
                                    View Profile
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Leaderboard -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-semibold mb-4">Top Writers</h4>
                        <div class="space-y-3">
                            <div class="flex items-center p-3 bg-yellow-50 rounded-lg">
                                <div class="flex items-center justify-center w-8 h-8 bg-yellow-500 text-white rounded-full text-sm font-bold mr-3">1</div>
                                <div class="flex-1">
                                    <p class="font-medium">John Doe</p>
                                    <p class="text-sm text-gray-600">Score: 85</p>
                                </div>
                                <i class="fas fa-crown text-yellow-500"></i>
                            </div>
                            
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center justify-center w-8 h-8 bg-gray-500 text-white rounded-full text-sm font-bold mr-3">2</div>
                                <div class="flex-1">
                                    <p class="font-medium">You</p>
                                    <p class="text-sm text-gray-600">Score: 75</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center p-3 bg-orange-50 rounded-lg">
                                <div class="flex items-center justify-center w-8 h-8 bg-orange-500 text-white rounded-full text-sm font-bold mr-3">3</div>
                                <div class="flex-1">
                                    <p class="font-medium">Jane Smith</p>
                                    <p class="text-sm text-gray-600">Score: 42</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="admin-panel" class="admin-panel-hidden fixed inset-0 bg-gray-100 z-40">
        <!-- Admin Sidebar -->
        <div class="bg-white w-64 h-full shadow-lg fixed left-0 top-0 z-50">
            <div class="p-6 border-b">
                <h2 class="text-xl font-bold text-gray-900">Admin Panel</h2>
                <p class="text-sm text-gray-600">Dozera News</p>
            </div>
            
            <nav class="mt-6">
                <button onclick="showAdminSection('dashboard')" class="admin-nav-btn w-full text-left px-6 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-900 border-l-4 border-transparent hover:border-blue-500">
                    <i class="fas fa-tachometer-alt mr-3"></i>Dashboard
                </button>
                <button onclick="showAdminSection('site-settings')" class="admin-nav-btn w-full text-left px-6 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-900 border-l-4 border-transparent hover:border-blue-500">
                    <i class="fas fa-cog mr-3"></i>Site Settings
                </button>
                <button onclick="showAdminSection('featured-posts')" class="admin-nav-btn w-full text-left px-6 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-900 border-l-4 border-transparent hover:border-blue-500">
                    <i class="fas fa-star mr-3"></i>Featured Posts
                </button>
                <button onclick="showAdminSection('pending-articles')" class="admin-nav-btn w-full text-left px-6 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-900 border-l-4 border-transparent hover:border-blue-500">
                    <i class="fas fa-clock mr-3"></i>Pending Articles
                    <span id="pending-count" class="ml-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full">0</span>
                </button>
                <button onclick="showAdminSection('all-articles')" class="admin-nav-btn w-full text-left px-6 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-900 border-l-4 border-transparent hover:border-blue-500">
                    <i class="fas fa-newspaper mr-3"></i>All Articles
                </button>
                <button onclick="showAdminSection('users')" class="admin-nav-btn w-full text-left px-6 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-900 border-l-4 border-transparent hover:border-blue-500">
                    <i class="fas fa-users mr-3"></i>User Management
                </button>
                <button onclick="showAdminSection('user-activity')" class="admin-nav-btn w-full text-left px-6 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-900 border-l-4 border-transparent hover:border-blue-500">
                    <i class="fas fa-chart-line mr-3"></i>User Activity
                </button>
                <button onclick="showAdminSection('permissions')" class="admin-nav-btn w-full text-left px-6 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-900 border-l-4 border-transparent hover:border-blue-500">
                    <i class="fas fa-shield-alt mr-3"></i>Permissions
                </button>
            </nav>
            
            <div class="absolute bottom-0 left-0 right-0 p-6 border-t">
                <button onclick="adminLogout()" class="w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition duration-200">
                    <i class="fas fa-sign-out-alt mr-2"></i>Logout
                </button>
            </div>
        </div>

        <!-- Admin Content -->
        <div class="ml-64 p-8">
            <!-- Dashboard Section -->
            <div id="admin-dashboard" class="admin-section">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Admin Dashboard</h3>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center">
                            <div class="p-3 bg-blue-100 rounded-full">
                                <i class="fas fa-newspaper text-blue-600 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600">Published Articles</p>
                                <p class="text-2xl font-bold text-gray-900" id="published-articles">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center">
                            <div class="p-3 bg-yellow-100 rounded-full">
                                <i class="fas fa-clock text-yellow-600 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600">Pending Review</p>
                                <p class="text-2xl font-bold text-gray-900" id="pending-articles">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center">
                            <div class="p-3 bg-green-100 rounded-full">
                                <i class="fas fa-users text-green-600 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600">Total Users</p>
                                <p class="text-2xl font-bold text-gray-900" id="total-users">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="flex items-center">
                            <div class="p-3 bg-purple-100 rounded-full">
                                <i class="fas fa-eye text-purple-600 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600">Page Views</p>
                                <p class="text-2xl font-bold text-gray-900">12,345</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pending Articles Section -->
            <div id="admin-pending-articles" class="admin-section hidden">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Pending Articles</h3>
                <div class="bg-white rounded-lg shadow overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Author</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="pending-articles-table" class="bg-white divide-y divide-gray-200">
                            <!-- Pending articles will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- All Articles Section -->
            <div id="admin-all-articles" class="admin-section hidden">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">All Articles</h3>
                <div class="bg-white rounded-lg shadow overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Author</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="all-articles-table" class="bg-white divide-y divide-gray-200">
                            <!-- All articles will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Users Section -->
            <div id="admin-users" class="admin-section hidden">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">User Management</h3>
                <div class="bg-white rounded-lg shadow overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">User</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Score</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Articles</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="users-table" class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-6 py-4">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-10 w-10">
                                            <div class="h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold">JD</div>
                                        </div>
                                        <div class="ml-4">
                                            <div class="text-sm font-medium text-gray-900 flex items-center">
                                                John Doe
                                                <svg class="w-4 h-4 ml-1 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                                </svg>
                                            </div>
                                            <div class="text-sm text-gray-500">john@example.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Active</span>
                                </td>
                                <td class="px-6 py-4 text-sm text-gray-900">
                                    <div class="flex items-center">
                                        <span class="font-bold text-lg">85</span>
                                        <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                            <div class="bg-blue-600 h-2 rounded-full" style="width: 85%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 text-sm text-gray-900">12</td>
                                <td class="px-6 py-4 text-sm font-medium space-x-2">
                                    <button onclick="viewUserProfile('user1')" class="text-blue-600 hover:text-blue-900">View</button>
                                    <button onclick="toggleUserVerification('user1')" class="text-green-600 hover:text-green-900">Verify</button>
                                    <button onclick="suspendUser('user1')" class="text-red-600 hover:text-red-900">Suspend</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-10 w-10">
                                            <div class="h-10 w-10 rounded-full bg-purple-500 flex items-center justify-center text-white font-bold">JS</div>
                                        </div>
                                        <div class="ml-4">
                                            <div class="text-sm font-medium text-gray-900">Jane Smith</div>
                                            <div class="text-sm text-gray-500">jane@example.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Suspended</span>
                                </td>
                                <td class="px-6 py-4 text-sm text-gray-900">
                                    <div class="flex items-center">
                                        <span class="font-bold text-lg">42</span>
                                        <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                            <div class="bg-yellow-600 h-2 rounded-full" style="width: 42%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 text-sm text-gray-900">3</td>
                                <td class="px-6 py-4 text-sm font-medium space-x-2">
                                    <button onclick="viewUserProfile('user2')" class="text-blue-600 hover:text-blue-900">View</button>
                                    <button onclick="unsuspendUser('user2')" class="text-green-600 hover:text-green-900">Unsuspend</button>
                                    <button onclick="deleteUser('user2')" class="text-red-600 hover:text-red-900">Delete</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Site Settings Section -->
            <div id="admin-site-settings" class="admin-section hidden">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Site Settings</h3>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Logo & Branding -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-semibold mb-4">Logo & Branding</h4>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Site Title</label>
                                <input type="text" id="site-title" value="Dozera News" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Site Tagline</label>
                                <input type="text" id="site-tagline" value="New York's Premier News Source" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Logo URL</label>
                                <input type="url" id="site-logo" placeholder="https://example.com/logo.png" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            </div>
                            <button onclick="updateSiteSettings()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">Update Branding</button>
                        </div>
                    </div>

                    <!-- Menu Settings -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-semibold mb-4">Navigation Menu</h4>
                        <div id="menu-items" class="space-y-3">
                            <div class="flex items-center space-x-3 p-3 border rounded">
                                <input type="text" value="Home" class="flex-1 px-2 py-1 border rounded">
                                <button class="text-red-600 hover:text-red-800"><i class="fas fa-trash"></i></button>
                            </div>
                            <div class="flex items-center space-x-3 p-3 border rounded">
                                <input type="text" value="Politics" class="flex-1 px-2 py-1 border rounded">
                                <button class="text-red-600 hover:text-red-800"><i class="fas fa-trash"></i></button>
                            </div>
                            <div class="flex items-center space-x-3 p-3 border rounded">
                                <input type="text" value="Business" class="flex-1 px-2 py-1 border rounded">
                                <button class="text-red-600 hover:text-red-800"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <button onclick="addMenuItem()" class="mt-3 bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700">Add Menu Item</button>
                    </div>
                </div>
            </div>

            <!-- Featured Posts Section -->
            <div id="admin-featured-posts" class="admin-section hidden">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Featured Posts Management</h3>
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="mb-6">
                        <h4 class="text-lg font-semibold mb-4">Current Featured Post</h4>
                        <div id="current-featured" class="border rounded-lg p-4 bg-yellow-50">
                            <h5 class="font-medium">NYC Mayor Announces Comprehensive Infrastructure Overhaul</h5>
                            <p class="text-sm text-gray-600 mt-1">By Sarah Johnson • Politics</p>
                            <button onclick="removeFeatured()" class="mt-2 text-red-600 hover:text-red-800 text-sm">Remove from Featured</button>
                        </div>
                    </div>
                    
                    <h4 class="text-lg font-semibold mb-4">Select New Featured Post</h4>
                    <div class="space-y-3" id="featured-candidates">
                        <!-- Articles will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- User Activity Section -->
            <div id="admin-user-activity" class="admin-section hidden">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">User Activity Tracking</h3>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h4 class="text-lg font-semibold mb-2">Active Users (24h)</h4>
                        <p class="text-3xl font-bold text-blue-600">127</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h4 class="text-lg font-semibold mb-2">Articles Read</h4>
                        <p class="text-3xl font-bold text-green-600">1,234</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h4 class="text-lg font-semibold mb-2">User Interactions</h4>
                        <p class="text-3xl font-bold text-purple-600">456</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow overflow-hidden">
                    <div class="px-6 py-4 border-b">
                        <h4 class="text-lg font-semibold">Recent User Activity</h4>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">User</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Action</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Time</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">IP Address</th>
                                </tr>
                            </thead>
                            <tbody id="activity-log" class="divide-y divide-gray-200">
                                <!-- Activity will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Permissions Section -->
            <div id="admin-permissions" class="admin-section hidden">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">User Permissions & Requests</h3>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Article Creation Requests -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-semibold mb-4">Article Creation Requests</h4>
                        <div class="space-y-3" id="creation-requests">
                            <div class="border rounded-lg p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="font-medium">John Doe</p>
                                        <p class="text-sm text-gray-600">Wants to create articles</p>
                                        <p class="text-xs text-gray-500">Requested 2 hours ago</p>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button onclick="approveCreationRequest('user1')" class="bg-green-600 text-white px-3 py-1 rounded text-sm">Approve</button>
                                        <button onclick="denyCreationRequest('user1')" class="bg-red-600 text-white px-3 py-1 rounded text-sm">Deny</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Edit Requests -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-semibold mb-4">Edit Permission Requests</h4>
                        <div class="space-y-3" id="edit-requests">
                            <div class="border rounded-lg p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="font-medium">Jane Smith</p>
                                        <p class="text-sm text-gray-600">Wants to edit: "NYC Infrastructure Plan"</p>
                                        <p class="text-xs text-gray-500">Requested 1 hour ago</p>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button onclick="approveEditRequest('edit1')" class="bg-green-600 text-white px-3 py-1 rounded text-sm">Approve</button>
                                        <button onclick="denyEditRequest('edit1')" class="bg-red-600 text-white px-3 py-1 rounded text-sm">Deny</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Admin Article Editor -->
                <div class="mt-6 bg-white rounded-lg shadow p-6">
                    <h4 class="text-lg font-semibold mb-4">Admin Article Editor</h4>
                    <p class="text-sm text-gray-600 mb-4">As admin, you can create articles with images and full editing capabilities.</p>
                    
                    <form class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                                <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                                <select class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                    <option value="politics">Politics</option>
                                    <option value="business">Business</option>
                                    <option value="sports">Sports</option>
                                    <option value="local">Local</option>
                                    <option value="breaking">Breaking News</option>
                                </select>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Featured Image URL</label>
                            <input type="url" placeholder="https://example.com/image.jpg" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <p class="text-xs text-gray-500 mt-1">Admin privilege: Add images via URL</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Summary</label>
                            <textarea rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-md"></textarea>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Content</label>
                            <textarea rows="8" class="w-full px-3 py-2 border border-gray-300 rounded-md"></textarea>
                        </div>
                        
                        <div class="flex space-x-3">
                            <button type="button" class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700">
                                Publish Immediately
                            </button>
                            <button type="button" class="bg-gray-600 text-white px-6 py-2 rounded-md hover:bg-gray-700">
                                Save as Draft
                            </button>
                            <button type="button" class="bg-yellow-600 text-white px-6 py-2 rounded-md hover:bg-yellow-700">
                                Set as Featured
                            </button>
                        </div>
                    </form>
                </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyA2aDGTKSbkeFnG5aAPPVGkGk3-JOsfbDQ",
            authDomain: "dozeranews.firebaseapp.com",
            projectId: "dozeranews",
            storageBucket: "dozeranews.firebasestorage.app",
            messagingSenderId: "162732208376",
            appId: "1:162732208376:web:6a0fe4df447b2e9a090b0d"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Global variables
        let currentUser = null;
        let isAdmin = false;
        let secretClickCount = 0;
        let secretTimeout = null;
        let userArticles = [];
        let allArticles = [];
        let currentRoute = null;

        // Sample data
        const sampleNews = [
            {
                id: '1',
                title: 'NYC Mayor Announces Comprehensive Infrastructure Overhaul',
                summary: 'A groundbreaking $50 billion initiative promises to transform New York City\'s aging infrastructure, focusing on transportation, utilities, and digital connectivity for the next decade.',
                content: `New York City Mayor announced today a groundbreaking infrastructure plan that will transform the city's transportation, utilities, and digital infrastructure over the next decade.

The comprehensive $50 billion initiative represents the largest infrastructure investment in the city's modern history, addressing decades of deferred maintenance and preparing New York for the challenges of the 21st century.

"This is not just about fixing what's broken," the Mayor said during a press conference at City Hall. "This is about building the foundation for New York's next chapter of growth and prosperity."

The plan encompasses several key areas:

**Transportation Modernization**
The subway system will receive $20 billion in upgrades, including new signal systems, accessibility improvements, and the addition of three new lines connecting underserved neighborhoods to Manhattan's business districts.

**Digital Infrastructure**
A citywide fiber optic network will be installed, providing high-speed internet access to all five boroughs. This $8 billion investment aims to bridge the digital divide and support the city's growing tech sector.

**Sustainable Energy**
The initiative includes $12 billion for renewable energy projects, including solar panel installations on public buildings and the development of offshore wind farms.

**Water and Waste Management**
Aging water mains and sewage systems will be replaced with modern, climate-resilient infrastructure designed to handle increased storm water from climate change.

The project is expected to create over 200,000 jobs over the next decade and will be funded through a combination of federal grants, municipal bonds, and public-private partnerships.

Construction is set to begin in early 2025, with the first phase focusing on the most critical transportation and utility upgrades.`,
                category: 'politics',
                author: 'Sarah Johnson',
                authorId: 'admin',
                date: new Date().toISOString(),
                status: 'published',
                tags: ['infrastructure', 'nyc', 'politics', 'transportation']
            },
            {
                id: '2',
                title: 'Wall Street Reaches New Heights as Trading Volume Soars',
                summary: 'Stock exchanges report highest daily trading volume in five years amid market volatility, with technology stocks leading unprecedented surge.',
                content: `Wall Street experienced unprecedented trading activity today as investors responded to new economic indicators and corporate earnings reports that exceeded expectations across multiple sectors.

The New York Stock Exchange and NASDAQ both reported record-breaking volumes, with over 15 billion shares changing hands – the highest single-day total since the market volatility of early 2020.

**Technology Leads the Charge**
Technology stocks were the primary drivers of today's surge, with major companies posting gains of 5-8%. The sector's performance was bolstered by strong quarterly earnings and optimistic guidance for the coming year.

"We're seeing a perfect storm of positive factors," said Maria Rodriguez, chief market strategist at Goldman Sachs. "Strong corporate earnings, improving economic indicators, and renewed investor confidence are all contributing to this rally."

**Market Indicators**
The S&P 500 closed up 3.2%, while the Dow Jones Industrial Average gained 2.8%. The tech-heavy NASDAQ saw the largest gains, rising 4.1% to close at a new all-time high.

**Economic Outlook**
Recent economic data has shown continued strength in employment, with unemployment remaining near historic lows. Consumer spending has also remained robust, despite concerns about inflation.

**Investor Sentiment**
The VIX, often called the "fear index," dropped to its lowest level in six months, indicating reduced market anxiety among investors.

**Looking Ahead**
Analysts remain cautiously optimistic about the market's near-term prospects, though they warn that geopolitical tensions and potential interest rate changes could introduce volatility.

The Federal Reserve's next meeting is scheduled for next month, where officials will review current monetary policy in light of recent economic developments.`,
                category: 'business',
                author: 'Michael Chen',
                authorId: 'admin',
                date: new Date(Date.now() - 86400000).toISOString(),
                status: 'published',
                tags: ['wall street', 'trading', 'stocks', 'economy']
            },
            {
                id: '3',
                title: 'Yankees Clinch Division Title in Dramatic Fashion',
                summary: 'Dominant performance secures playoff berth for the Bronx Bombers in a thrilling 9-7 victory over their division rivals.',
                content: `The New York Yankees secured their division title last night in dramatic fashion, defeating their longtime rivals 9-7 in a game that will be remembered as one of the season's most exciting contests.

**The Turning Point**
With the Yankees trailing 7-5 entering the bottom of the ninth inning, the team mounted a spectacular comeback that had the 50,000 fans at Yankee Stadium on their feet.

Aaron Judge led off the inning with a towering home run to right field, his 45th of the season, cutting the deficit to one run. Two batters later, Gleyber Torres delivered the game-winning hit – a two-run double that sent the stadium into pandemonium.

**Season Highlights**
This division title marks the Yankees' first since 2019 and caps off a remarkable season that saw the team overcome early-season struggles to dominate the second half.

The team's 95-67 record represents a significant improvement from last year's disappointing campaign. Key contributions came from both veteran leaders and emerging young talent.

**Playoff Implications**
With the division title secured, the Yankees will enter the playoffs as the American League's second seed, earning them home-field advantage in the first round.

Manager Aaron Boone praised his team's resilience: "This group never gave up, even when things looked bleak early in the season. They believed in each other and in our system."

**Looking to October**
The Yankees will now turn their attention to the playoffs, where they'll face the winner of the wild-card series. The team's combination of power hitting and improved pitching makes them a formidable opponent for any team.

The last time the Yankees won a division title, they went on to reach the American League Championship Series. Fans are hoping this year's team can go even further and bring home the franchise's 28th World Series championship.`,
                category: 'sports',
                author: 'David Rodriguez',
                authorId: 'admin',
                date: new Date(Date.now() - 172800000).toISOString(),
                status: 'published',
                tags: ['yankees', 'baseball', 'playoffs', 'sports']
            }
        ];

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            updateCurrentDate();
            loadNews();
            setupAuthStateListener();
            setupRouting();
        });

        // URL Routing System
        function setupRouting() {
            // Handle initial route
            handleRoute();
            
            // Listen for hash changes
            window.addEventListener('hashchange', handleRoute);
            
            // Listen for back/forward buttons
            window.addEventListener('popstate', handleRoute);
        }

        function handleRoute() {
            const hash = window.location.hash;
            
            if (hash.startsWith('#/article/')) {
                const articleSlug = hash.replace('#/article/', '');
                showArticleBySlug(articleSlug);
            } else {
                // Default route - show main page
                hideArticleView();
            }
        }

        function createArticleSlug(title) {
            return title
                .toLowerCase()
                .replace(/[^a-z0-9\s-]/g, '') // Remove special characters
                .replace(/\s+/g, '-') // Replace spaces with hyphens
                .replace(/-+/g, '-') // Replace multiple hyphens with single
                .trim('-'); // Remove leading/trailing hyphens
        }

        function showArticleBySlug(slug) {
            // Find article by slug
            const publishedArticles = [...sampleNews, ...allArticles.filter(a => a.status === 'published')];
            const article = publishedArticles.find(a => createArticleSlug(a.title) === slug);
            
            if (article) {
                showFullScreenArticle(article);
            } else {
                // Article not found, redirect to home
                window.location.hash = '';
            }
        }

        function navigateToArticle(article) {
            const slug = createArticleSlug(article.title);
            window.location.hash = `#/article/${slug}`;
        }

        // Update current date
        function updateCurrentDate() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            document.getElementById('current-date').textContent = now.toLocaleDateString('en-US', options);
        }

        // Secret admin access
        function handleSecretClick() {
            secretClickCount++;
            clearTimeout(secretTimeout);
            
            if (secretClickCount >= 5) {
                document.getElementById('admin-login-modal').classList.remove('hidden');
                secretClickCount = 0;
            } else {
                secretTimeout = setTimeout(() => {
                    secretClickCount = 0;
                }, 2000);
            }
        }

        // Access code verification
        function verifyAccessCode() {
            const code = document.getElementById('access-code').value;
            if (code === '20060202') {
                // Direct admin access without authentication
                isAdmin = true;
                currentUser = { uid: 'admin', displayName: 'Administrator', email: 'admin@dozeranews.com' };
                closeAdminModal();
                showAdminPanel();
                
                // Update UI
                document.getElementById('user-auth-section').classList.add('hidden');
                document.getElementById('user-logged-in-section').classList.remove('hidden');
                document.getElementById('user-display-name').textContent = 'Administrator';
            } else {
                alert('Invalid access code');
            }
        }

        // Firebase Auth State Listener
        function setupAuthStateListener() {
            auth.onAuthStateChanged(async (user) => {
                currentUser = user;
                if (user) {
                    // Check if user has admin privileges
                    try {
                        const token = await user.getIdTokenResult();
                        isAdmin = token.claims.admin === true;
                        
                        // Update UI based on auth state
                        document.getElementById('user-auth-section').classList.add('hidden');
                        document.getElementById('user-logged-in-section').classList.remove('hidden');
                        document.getElementById('user-display-name').textContent = user.displayName || user.email || 'User';
                        
                        if (isAdmin) {
                            closeAdminModal();
                            showAdminPanel();
                        }
                    } catch (error) {
                        console.error('Error getting token:', error);
                    }
                } else {
                    // User is signed out
                    document.getElementById('user-auth-section').classList.remove('hidden');
                    document.getElementById('user-logged-in-section').classList.add('hidden');
                    hideUserPanel();
                    hideAdminPanel();
                    isAdmin = false;
                }
            });
        }

        // User Authentication Functions
        function showUserLogin() {
            document.getElementById('user-login-modal').classList.remove('hidden');
        }

        function closeUserModal() {
            document.getElementById('user-login-modal').classList.add('hidden');
            document.getElementById('user-auth-providers').classList.remove('hidden');
            document.getElementById('user-email-auth-form').classList.add('hidden');
        }

        function showUserEmailAuth() {
            document.getElementById('user-auth-providers').classList.add('hidden');
            document.getElementById('user-email-auth-form').classList.remove('hidden');
        }

        function showUserAuthProviders() {
            document.getElementById('user-email-auth-form').classList.add('hidden');
            document.getElementById('user-auth-providers').classList.remove('hidden');
        }

        async function userSignInWithGoogle() {
            try {
                const provider = new firebase.auth.GoogleAuthProvider();
                await auth.signInWithPopup(provider);
                closeUserModal();
            } catch (error) {
                console.error('Google sign-in error:', error);
                alert('Sign-in failed. Please try again.');
            }
        }

        async function userSignInWithGitHub() {
            try {
                const provider = new firebase.auth.GithubAuthProvider();
                await auth.signInWithPopup(provider);
                closeUserModal();
            } catch (error) {
                console.error('GitHub sign-in error:', error);
                alert('Sign-in failed. Please try again.');
            }
        }

        async function userSignInWithTwitter() {
            try {
                const provider = new firebase.auth.TwitterAuthProvider();
                await auth.signInWithPopup(provider);
                closeUserModal();
            } catch (error) {
                console.error('Twitter sign-in error:', error);
                alert('Sign-in failed. Please try again.');
            }
        }

        async function userSignInWithEmail() {
            const email = document.getElementById('user-email').value;
            const password = document.getElementById('user-password').value;
            
            try {
                await auth.signInWithEmailAndPassword(email, password);
                closeUserModal();
            } catch (error) {
                console.error('Email sign-in error:', error);
                alert('Sign-in failed. Please check your credentials.');
            }
        }

        async function userSignUpWithEmail() {
            const email = document.getElementById('user-email').value;
            const password = document.getElementById('user-password').value;
            
            try {
                await auth.createUserWithEmailAndPassword(email, password);
                closeUserModal();
            } catch (error) {
                console.error('Email sign-up error:', error);
                alert('Sign-up failed. Please try again.');
            }
        }

        async function userSignInWithPhone() {
            alert('Phone authentication requires additional configuration. Please use another method.');
        }

        async function userSignInAnonymously() {
            try {
                await auth.signInAnonymously();
                closeUserModal();
            } catch (error) {
                console.error('Anonymous sign-in error:', error);
                alert('Anonymous sign-in failed. Please try again.');
            }
        }

        async function userLogout() {
            try {
                await auth.signOut();
                hideUserPanel();
                hideAdminPanel();
            } catch (error) {
                console.error('Logout error:', error);
            }
        }

        // Admin Authentication Functions
        function closeAdminModal() {
            document.getElementById('admin-login-modal').classList.add('hidden');
            document.getElementById('access-code-step').classList.remove('hidden');
            document.getElementById('admin-auth-providers-step').classList.add('hidden');
            document.getElementById('admin-email-auth-form').classList.add('hidden');
            document.getElementById('access-code').value = '';
        }

        function showAdminEmailAuth() {
            document.getElementById('admin-auth-providers-step').classList.add('hidden');
            document.getElementById('admin-email-auth-form').classList.remove('hidden');
        }

        function showAdminAuthProviders() {
            document.getElementById('admin-email-auth-form').classList.add('hidden');
            document.getElementById('admin-auth-providers-step').classList.remove('hidden');
        }

        async function adminSignInWithGoogle() {
            try {
                const provider = new firebase.auth.GoogleAuthProvider();
                await auth.signInWithPopup(provider);
            } catch (error) {
                console.error('Google sign-in error:', error);
                alert('Sign-in failed. Please try again.');
            }
        }

        async function adminSignInWithGitHub() {
            try {
                const provider = new firebase.auth.GithubAuthProvider();
                await auth.signInWithPopup(provider);
            } catch (error) {
                console.error('GitHub sign-in error:', error);
                alert('Sign-in failed. Please try again.');
            }
        }

        async function adminSignInWithTwitter() {
            try {
                const provider = new firebase.auth.TwitterAuthProvider();
                await auth.signInWithPopup(provider);
            } catch (error) {
                console.error('Twitter sign-in error:', error);
                alert('Sign-in failed. Please try again.');
            }
        }

        async function adminSignInWithEmail() {
            const email = document.getElementById('admin-email').value;
            const password = document.getElementById('admin-password').value;
            
            try {
                await auth.signInWithEmailAndPassword(email, password);
            } catch (error) {
                console.error('Email sign-in error:', error);
                alert('Sign-in failed. Please check your credentials.');
            }
        }

        async function adminSignUpWithEmail() {
            const email = document.getElementById('admin-email').value;
            const password = document.getElementById('admin-password').value;
            
            try {
                await auth.createUserWithEmailAndPassword(email, password);
            } catch (error) {
                console.error('Email sign-up error:', error);
                alert('Sign-up failed. Please try again.');
            }
        }

        async function adminSignInWithPhone() {
            alert('Phone authentication requires additional configuration. Please use another method.');
        }

        async function adminSignInAnonymously() {
            try {
                await auth.signInAnonymously();
            } catch (error) {
                console.error('Anonymous sign-in error:', error);
                alert('Anonymous sign-in failed. Please try again.');
            }
        }

        async function adminLogout() {
            try {
                await auth.signOut();
                hideAdminPanel();
            } catch (error) {
                console.error('Logout error:', error);
            }
        }

        // User Dashboard Functions
        function showUserDashboard() {
            if (!currentUser) {
                showUserLogin();
                return;
            }
            document.getElementById('user-panel').classList.remove('user-panel-hidden');
            document.getElementById('user-panel-name').textContent = `Welcome, ${currentUser.displayName || currentUser.email || 'User'}!`;
            loadUserArticles();
            showUserSection('my-articles');
        }

        function hideUserPanel() {
            document.getElementById('user-panel').classList.add('user-panel-hidden');
        }

        function showUserSection(section) {
            // Hide all sections
            document.querySelectorAll('.user-section').forEach(el => el.classList.add('hidden'));
            
            // Show selected section
            document.getElementById(`user-${section}`).classList.remove('hidden');
            
            // Update navigation
            document.querySelectorAll('.user-nav-btn').forEach(btn => {
                btn.classList.remove('bg-blue-50', 'text-blue-900', 'border-blue-500');
            });
            event.target.classList.add('bg-blue-50', 'text-blue-900', 'border-blue-500');
        }

        function loadUserArticles() {
            if (!currentUser) return;
            
            // Filter articles by current user
            const userArticlesList = allArticles.filter(article => article.authorId === currentUser.uid);
            
            const tbody = document.getElementById('user-articles-table');
            tbody.innerHTML = '';
            
            if (userArticlesList.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" class="px-6 py-4 text-center text-gray-500">No articles yet. Start writing!</td></tr>';
                return;
            }
            
            userArticlesList.forEach(article => {
                const row = document.createElement('tr');
                const statusClass = `status-${article.status}`;
                
                row.innerHTML = `
                    <td class="px-6 py-4">
                        <div class="text-sm font-medium text-gray-900">${article.title}</div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusClass}">
                            ${article.status.toUpperCase()}
                        </span>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-500">
                        ${new Date(article.date).toLocaleDateString()}
                    </td>
                    <td class="px-6 py-4 text-sm font-medium">
                        ${article.status === 'draft' || article.status === 'rejected' ? 
                            `<button onclick="editUserArticle('${article.id}')" class="text-blue-600 hover:text-blue-900 mr-3">Edit</button>` : 
                            '<span class="text-gray-400">Published</span>'
                        }
                        <button onclick="deleteUserArticle('${article.id}')" class="text-red-600 hover:text-red-900">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function saveUserArticle(status) {
            if (!currentUser) {
                alert('Please sign in to save articles');
                return;
            }
            
            const title = document.getElementById('user-article-title').value;
            const category = document.getElementById('user-article-category').value;
            const tags = document.getElementById('user-article-tags').value;
            const summary = document.getElementById('user-article-summary').value;
            const content = document.getElementById('user-article-content').value;
            
            if (!title || !summary || !content) {
                alert('Please fill in all required fields');
                return;
            }
            
            const articleData = {
                id: Date.now().toString(),
                title,
                category,
                tags: tags.split(',').map(tag => tag.trim()).filter(tag => tag),
                summary,
                content,
                author: currentUser.displayName || currentUser.email || 'Anonymous',
                authorId: currentUser.uid,
                date: new Date().toISOString(),
                status: status
            };
            
            // Add to articles array (in real app, save to Firestore)
            allArticles.unshift(articleData);
            
            // Clear form
            document.getElementById('user-article-form').reset();
            
            // Refresh user articles
            loadUserArticles();
            
            // Show success message
            const statusText = status === 'draft' ? 'saved as draft' : 'submitted for review';
            alert(`Article ${statusText} successfully!`);
            
            // Switch to my articles view
            showUserSection('my-articles');
        }

        function editUserArticle(articleId) {
            const article = allArticles.find(a => a.id === articleId);
            if (!article) return;
            
            // Populate form with article data
            document.getElementById('user-article-title').value = article.title;
            document.getElementById('user-article-category').value = article.category;
            document.getElementById('user-article-tags').value = article.tags.join(', ');
            document.getElementById('user-article-summary').value = article.summary;
            document.getElementById('user-article-content').value = article.content;
            
            // Switch to write article view
            showUserSection('write-article');
            
            // Remove the old article (will be replaced when saved)
            const index = allArticles.findIndex(a => a.id === articleId);
            if (index > -1) {
                allArticles.splice(index, 1);
            }
        }

        function deleteUserArticle(articleId) {
            if (confirm('Are you sure you want to delete this article?')) {
                const index = allArticles.findIndex(a => a.id === articleId);
                if (index > -1) {
                    allArticles.splice(index, 1);
                    loadUserArticles();
                    loadNews(); // Refresh public view if published
                }
            }
        }

        function updateUserProfile() {
            if (!currentUser) return;
            
            const displayName = document.getElementById('user-display-name-input').value;
            const bio = document.getElementById('user-bio').value;
            
            // In real app, update Firebase user profile and Firestore
            currentUser.updateProfile({
                displayName: displayName
            }).then(() => {
                alert('Profile updated successfully!');
                document.getElementById('user-display-name').textContent = displayName;
                document.getElementById('user-panel-name').textContent = `Welcome, ${displayName}!`;
            }).catch((error) => {
                console.error('Error updating profile:', error);
                alert('Failed to update profile');
            });
        }

        // Admin Panel Functions
        function showAdminPanel() {
            document.getElementById('admin-panel').classList.remove('admin-panel-hidden');
            loadAdminData();
            showAdminSection('dashboard');
        }

        function hideAdminPanel() {
            document.getElementById('admin-panel').classList.add('admin-panel-hidden');
        }

        function showAdminSection(section) {
            // Hide all sections
            document.querySelectorAll('.admin-section').forEach(el => el.classList.add('hidden'));
            
            // Show selected section
            document.getElementById(`admin-${section}`).classList.remove('hidden');
            
            // Update navigation
            document.querySelectorAll('.admin-nav-btn').forEach(btn => {
                btn.classList.remove('bg-blue-50', 'text-blue-900', 'border-blue-500');
            });
            event.target.classList.add('bg-blue-50', 'text-blue-900', 'border-blue-500');
        }

        function loadAdminData() {
            loadPendingArticles();
            loadAllArticlesAdmin();
            updateAdminStats();
            loadFeaturedCandidates();
            loadUserActivity();
        }

        function loadPendingArticles() {
            const pendingArticles = allArticles.filter(article => article.status === 'pending');
            const tbody = document.getElementById('pending-articles-table');
            tbody.innerHTML = '';
            
            document.getElementById('pending-count').textContent = pendingArticles.length;
            
            if (pendingArticles.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" class="px-6 py-4 text-center text-gray-500">No pending articles</td></tr>';
                return;
            }
            
            pendingArticles.forEach(article => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4">
                        <div class="text-sm font-medium text-gray-900">${article.title}</div>
                        <div class="text-sm text-gray-500">${article.summary.substring(0, 100)}...</div>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-900">${article.author}</td>
                    <td class="px-6 py-4">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full category-${article.category}">
                            ${article.category}
                        </span>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-500">
                        ${new Date(article.date).toLocaleDateString()}
                    </td>
                    <td class="px-6 py-4 text-sm font-medium">
                        <button onclick="approveArticle('${article.id}')" class="text-green-600 hover:text-green-900 mr-3">Approve</button>
                        <button onclick="rejectArticle('${article.id}')" class="text-red-600 hover:text-red-900 mr-3">Reject</button>
                        <button onclick="viewArticle('${article.id}')" class="text-blue-600 hover:text-blue-900">View</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function loadAllArticlesAdmin() {
            const tbody = document.getElementById('all-articles-table');
            tbody.innerHTML = '';
            
            allArticles.forEach(article => {
                const row = document.createElement('tr');
                const statusClass = `status-${article.status}`;
                
                row.innerHTML = `
                    <td class="px-6 py-4">
                        <div class="text-sm font-medium text-gray-900">${article.title}</div>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-900">${article.author}</td>
                    <td class="px-6 py-4">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusClass}">
                            ${article.status.toUpperCase()}
                        </span>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-500">
                        ${new Date(article.date).toLocaleDateString()}
                    </td>
                    <td class="px-6 py-4 text-sm font-medium">
                        <button onclick="viewArticle('${article.id}')" class="text-blue-600 hover:text-blue-900 mr-3">View</button>
                        <button onclick="deleteArticleAdmin('${article.id}')" class="text-red-600 hover:text-red-900">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateAdminStats() {
            const publishedCount = allArticles.filter(a => a.status === 'published').length;
            const pendingCount = allArticles.filter(a => a.status === 'pending').length;
            
            document.getElementById('published-articles').textContent = publishedCount;
            document.getElementById('pending-articles').textContent = pendingCount;
            document.getElementById('total-users').textContent = '1'; // Placeholder
        }

        function approveArticle(articleId) {
            const article = allArticles.find(a => a.id === articleId);
            if (article) {
                article.status = 'published';
                loadAdminData();
                loadNews(); // Refresh public view
                alert('Article approved and published!');
            }
        }

        function rejectArticle(articleId) {
            const reason = prompt('Reason for rejection (optional):');
            const article = allArticles.find(a => a.id === articleId);
            if (article) {
                article.status = 'rejected';
                article.rejectionReason = reason;
                loadAdminData();
                alert('Article rejected.');
            }
        }

        function viewArticle(articleId) {
            const article = allArticles.find(a => a.id === articleId);
            if (article) {
                alert(`Title: ${article.title}\n\nContent: ${article.content}`);
            }
        }

        function deleteArticleAdmin(articleId) {
            if (confirm('Are you sure you want to delete this article?')) {
                const index = allArticles.findIndex(a => a.id === articleId);
                if (index > -1) {
                    allArticles.splice(index, 1);
                    loadAdminData();
                    loadNews();
                }
            }
        }

        // News Display Functions
        function loadNews() {
            const newsGrid = document.getElementById('news-grid');
            newsGrid.innerHTML = '';
            
            // Combine sample news with published user articles
            const publishedArticles = [...sampleNews, ...allArticles.filter(a => a.status === 'published')];
            
            publishedArticles.forEach(article => {
                const articleCard = createNewsCard(article);
                newsGrid.appendChild(articleCard);
            });
        }

        function createNewsCard(article) {
            const card = document.createElement('div');
            card.className = 'news-card bg-white shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-300';
            
            const categoryColors = {
                politics: 'category-politics',
                business: 'category-business',
                sports: 'category-sports',
                local: 'category-local',
                opinion: 'category-opinion'
            };
            
            card.innerHTML = `
                <div class="p-6">
                    <div class="mb-3">
                        <span class="px-2 py-1 text-xs font-bold text-white rounded uppercase ${categoryColors[article.category] || 'bg-gray-600'}">
                            ${article.category}
                        </span>
                    </div>
                    <h3 class="font-headline text-xl font-bold text-black mb-3 leading-tight hover:text-red-600 cursor-pointer">${article.title}</h3>
                    <p class="text-gray-700 mb-4 leading-relaxed">${article.summary}</p>
                    <div class="article-meta flex items-center justify-between">
                        <span>By <strong>${article.author}</strong></span>
                        <span>${new Date(article.date).toLocaleDateString()}</span>
                    </div>
                </div>
            `;
            
            card.addEventListener('click', () => navigateToArticle(article));
            return card;
        }

        function showCategory(category) {
            const newsGrid = document.getElementById('news-grid');
            newsGrid.innerHTML = '';
            
            const publishedArticles = [...sampleNews, ...allArticles.filter(a => a.status === 'published')];
            const filteredNews = category === 'all' ? publishedArticles : publishedArticles.filter(article => article.category === category);
            
            filteredNews.forEach(article => {
                const articleCard = createNewsCard(article);
                newsGrid.appendChild(articleCard);
            });
        }

        function showFullScreenArticle(article) {
            // Hide main content
            document.querySelector('main').style.display = 'none';
            document.querySelector('nav').style.display = 'none';
            
            // Show article view
            document.getElementById('article-view').classList.remove('hidden');
            
            // Populate article data
            const categoryColors = {
                politics: 'bg-blue-600',
                business: 'bg-green-600',
                sports: 'bg-yellow-600',
                local: 'bg-purple-600',
                opinion: 'bg-gray-600',
                breaking: 'bg-red-600'
            };
            
            document.getElementById('article-category').textContent = article.category.toUpperCase();
            document.getElementById('article-category').className = `px-3 py-1 text-xs font-bold text-white rounded uppercase ${categoryColors[article.category] || 'bg-gray-600'}`;
            
            document.getElementById('article-title').textContent = article.title;
            document.getElementById('article-summary').textContent = article.summary;
            document.getElementById('article-author').textContent = article.author;
            document.getElementById('article-date').textContent = new Date(article.date).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // Set author avatar
            const authorInitials = article.author.split(' ').map(name => name[0]).join('').toUpperCase();
            document.getElementById('article-author-avatar').textContent = authorInitials;
            
            // Calculate read time (rough estimate: 200 words per minute)
            const wordCount = article.content.split(' ').length;
            const readTime = Math.ceil(wordCount / 200);
            document.getElementById('article-read-time').textContent = `${readTime} min read`;
            
            // Set random view count for demo
            const viewCount = Math.floor(Math.random() * 5000) + 100;
            document.getElementById('article-views').textContent = `${viewCount.toLocaleString()} views`;
            
            // Set article content with proper formatting
            let formattedContent = article.content
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // Bold text
                .replace(/\n\n/g, '</p><p>') // Paragraph breaks
                .replace(/\n/g, '<br>'); // Line breaks
            
            document.getElementById('article-content').innerHTML = `<p>${formattedContent}</p>`;
            
            // Handle article image if exists
            if (article.image) {
                document.getElementById('article-image').src = article.image;
                document.getElementById('article-image').alt = article.title;
                document.getElementById('article-image-container').classList.remove('hidden');
            } else {
                document.getElementById('article-image-container').classList.add('hidden');
            }
            
            // Handle tags
            if (article.tags && article.tags.length > 0) {
                const tagsContainer = document.getElementById('article-tags');
                tagsContainer.innerHTML = '';
                article.tags.forEach(tag => {
                    const tagElement = document.createElement('span');
                    tagElement.className = 'px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full hover:bg-gray-200 cursor-pointer';
                    tagElement.textContent = tag;
                    tagsContainer.appendChild(tagElement);
                });
                document.getElementById('article-tags-container').classList.remove('hidden');
            } else {
                document.getElementById('article-tags-container').classList.add('hidden');
            }
            
            // Load related articles
            loadRelatedArticles(article);
            
            // Update page title
            document.title = `${article.title} - Dozera News`;
        }

        function hideArticleView() {
            document.getElementById('article-view').classList.add('hidden');
            document.querySelector('main').style.display = 'block';
            document.querySelector('nav').style.display = 'block';
            document.title = 'Dozera News - New York\'s Premier News Source';
        }

        function closeArticleView() {
            window.location.hash = '';
        }

        function loadRelatedArticles(currentArticle) {
            const publishedArticles = [...sampleNews, ...allArticles.filter(a => a.status === 'published')];
            
            // Find related articles (same category, excluding current article)
            let relatedArticles = publishedArticles.filter(article => 
                article.id !== currentArticle.id && 
                article.category === currentArticle.category
            );
            
            // If not enough related articles, add from other categories
            if (relatedArticles.length < 3) {
                const otherArticles = publishedArticles.filter(article => 
                    article.id !== currentArticle.id && 
                    article.category !== currentArticle.category
                );
                relatedArticles = [...relatedArticles, ...otherArticles];
            }
            
            // Limit to 3 articles
            relatedArticles = relatedArticles.slice(0, 3);
            
            const container = document.getElementById('related-articles');
            container.innerHTML = '';
            
            relatedArticles.forEach(article => {
                const articleCard = document.createElement('div');
                articleCard.className = 'bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-300 cursor-pointer';
                
                const categoryColors = {
                    politics: 'bg-blue-600',
                    business: 'bg-green-600',
                    sports: 'bg-yellow-600',
                    local: 'bg-purple-600',
                    opinion: 'bg-gray-600'
                };
                
                articleCard.innerHTML = `
                    <div class="p-6">
                        <div class="mb-3">
                            <span class="px-2 py-1 text-xs font-bold text-white rounded uppercase ${categoryColors[article.category] || 'bg-gray-600'}">
                                ${article.category}
                            </span>
                        </div>
                        <h3 class="font-headline text-lg font-bold text-black mb-2 leading-tight hover:text-red-600">${article.title}</h3>
                        <p class="text-gray-600 text-sm mb-3 leading-relaxed">${article.summary.substring(0, 120)}...</p>
                        <div class="text-xs text-gray-500">
                            <span>By <strong>${article.author}</strong></span>
                            <span class="mx-1">•</span>
                            <span>${new Date(article.date).toLocaleDateString()}</span>
                        </div>
                    </div>
                `;
                
                articleCard.addEventListener('click', () => navigateToArticle(article));
                container.appendChild(articleCard);
            });
        }

        function shareArticle() {
            const currentUrl = window.location.href;
            const title = document.getElementById('article-title').textContent;
            
            if (navigator.share) {
                navigator.share({
                    title: title,
                    url: currentUrl
                }).catch(console.error);
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(currentUrl).then(() => {
                    alert('Article URL copied to clipboard!');
                }).catch(() => {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = currentUrl;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    alert('Article URL copied to clipboard!');
                });
            }
        }

        function bookmarkArticle() {
            const title = document.getElementById('article-title').textContent;
            const url = window.location.href;
            
            // Store bookmark in localStorage (in real app, save to user account)
            let bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
            
            const bookmark = {
                title: title,
                url: url,
                date: new Date().toISOString()
            };
            
            // Check if already bookmarked
            const existingIndex = bookmarks.findIndex(b => b.url === url);
            if (existingIndex > -1) {
                bookmarks.splice(existingIndex, 1);
                alert('Bookmark removed!');
            } else {
                bookmarks.unshift(bookmark);
                alert('Article bookmarked!');
            }
            
            localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
        }

        // Initialize with sample data
        allArticles = [...sampleNews];
        
        // Global variables for admin features
        let siteSettings = {
            title: 'Dozera News',
            tagline: 'New York\'s Premier News Source',
            logo: ''
        };
        
        let userPermissions = {
            canCreateArticles: false,
            canEditArticles: false,
            isVerified: false
        };
        
        let activityLog = [
            { user: 'John Doe', action: 'Published article', time: '2 hours ago', ip: '192.168.1.1' },
            { user: 'Jane Smith', action: 'Logged in', time: '3 hours ago', ip: '192.168.1.2' },
            { user: 'Admin', action: 'Approved article', time: '4 hours ago', ip: '192.168.1.100' }
        ];

        // Admin Functions
        function updateSiteSettings() {
            const title = document.getElementById('site-title').value;
            const tagline = document.getElementById('site-tagline').value;
            const logo = document.getElementById('site-logo').value;
            
            siteSettings = { title, tagline, logo };
            
            // Update header
            document.querySelector('header h1').textContent = title;
            document.querySelector('header p').textContent = tagline;
            
            if (logo) {
                const headerTitle = document.querySelector('header h1');
                headerTitle.innerHTML = `<img src="${logo}" alt="${title}" class="h-16 mx-auto mb-2" onerror="this.style.display='none'"> ${title}`;
            }
            
            alert('Site settings updated successfully!');
        }

        function addMenuItem() {
            const menuContainer = document.getElementById('menu-items');
            const newItem = document.createElement('div');
            newItem.className = 'flex items-center space-x-3 p-3 border rounded';
            newItem.innerHTML = `
                <input type="text" placeholder="Menu Item" class="flex-1 px-2 py-1 border rounded">
                <button onclick="this.parentElement.remove()" class="text-red-600 hover:text-red-800"><i class="fas fa-trash"></i></button>
            `;
            menuContainer.appendChild(newItem);
        }

        function loadFeaturedCandidates() {
            const container = document.getElementById('featured-candidates');
            container.innerHTML = '';
            
            const publishedArticles = allArticles.filter(a => a.status === 'published');
            publishedArticles.forEach(article => {
                const div = document.createElement('div');
                div.className = 'flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50';
                div.innerHTML = `
                    <div>
                        <h5 class="font-medium">${article.title}</h5>
                        <p class="text-sm text-gray-600">By ${article.author} • ${article.category}</p>
                    </div>
                    <button onclick="setFeatured('${article.id}')" class="bg-yellow-600 text-white px-4 py-2 rounded-md hover:bg-yellow-700">
                        Set as Featured
                    </button>
                `;
                container.appendChild(div);
            });
        }

        function setFeatured(articleId) {
            const article = allArticles.find(a => a.id === articleId);
            if (article) {
                document.getElementById('current-featured').innerHTML = `
                    <h5 class="font-medium">${article.title}</h5>
                    <p class="text-sm text-gray-600 mt-1">By ${article.author} • ${article.category}</p>
                    <button onclick="removeFeatured()" class="mt-2 text-red-600 hover:text-red-800 text-sm">Remove from Featured</button>
                `;
                alert('Featured post updated!');
            }
        }

        function removeFeatured() {
            document.getElementById('current-featured').innerHTML = `
                <p class="text-gray-500">No featured post selected</p>
            `;
        }

        function loadUserActivity() {
            const tbody = document.getElementById('activity-log');
            tbody.innerHTML = '';
            
            activityLog.forEach(log => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 text-sm text-gray-900">${log.user}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">${log.action}</td>
                    <td class="px-6 py-4 text-sm text-gray-500">${log.time}</td>
                    <td class="px-6 py-4 text-sm text-gray-500">${log.ip}</td>
                `;
                tbody.appendChild(row);
            });
        }

        function approveCreationRequest(userId) {
            userPermissions.canCreateArticles = true;
            document.getElementById('permission-required').classList.add('hidden');
            document.getElementById('article-form-container').classList.remove('hidden');
            alert('Article creation permission granted!');
        }

        function denyCreationRequest(userId) {
            alert('Article creation request denied.');
        }

        function approveEditRequest(requestId) {
            alert('Edit permission granted!');
        }

        function denyEditRequest(requestId) {
            alert('Edit request denied.');
        }

        function viewUserProfile(userId) {
            alert('Viewing user profile for: ' + userId);
        }

        function toggleUserVerification(userId) {
            alert('User verification status toggled for: ' + userId);
        }

        function suspendUser(userId) {
            if (confirm('Are you sure you want to suspend this user?')) {
                alert('User suspended: ' + userId);
            }
        }

        function unsuspendUser(userId) {
            alert('User unsuspended: ' + userId);
        }

        function deleteUser(userId) {
            if (confirm('Are you sure you want to delete this user? This action cannot be undone.')) {
                alert('User deleted: ' + userId);
            }
        }

        // User Functions
        function requestCreationPermission() {
            alert('Permission request sent to admin. You will be notified once approved.');
            // In real app, this would send a request to admin
        }

        function viewOtherUserProfile(userId) {
            // Create modal to show other user's profile
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-lg max-w-2xl w-full p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold">User Profile</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    
                    <div class="text-center mb-6">
                        <div class="h-20 w-20 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold text-2xl mx-auto mb-4">
                            JD
                        </div>
                        <div class="flex items-center justify-center">
                            <h4 class="text-xl font-bold">John Doe</h4>
                            <svg class="w-5 h-5 ml-2 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <p class="text-gray-600 mt-2">Verified Writer</p>
                    </div>
                    
                    <div class="grid grid-cols-3 gap-4 mb-6">
                        <div class="text-center p-4 bg-blue-50 rounded-lg">
                            <p class="text-2xl font-bold text-blue-600">85</p>
                            <p class="text-sm text-gray-600">Score</p>
                        </div>
                        <div class="text-center p-4 bg-green-50 rounded-lg">
                            <p class="text-2xl font-bold text-green-600">12</p>
                            <p class="text-sm text-gray-600">Articles</p>
                        </div>
                        <div class="text-center p-4 bg-purple-50 rounded-lg">
                            <p class="text-2xl font-bold text-purple-600">1.2K</p>
                            <p class="text-sm text-gray-600">Views</p>
                        </div>
                    </div>
                    
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h5 class="font-semibold mb-2">Bio</h5>
                        <p class="text-gray-700">Experienced journalist covering NYC politics and local news. Passionate about community stories and investigative reporting.</p>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Page Content Data
        const pageContent = {
            about: {
                title: "About Dozera News",
                content: `
                    <h2>Our Mission</h2>
                    <p>Dozera News is New York's premier digital news source, committed to delivering accurate, timely, and comprehensive coverage of the stories that matter most to our community.</p>
                    
                    <h2>Our Story</h2>
                    <p>Founded in 2024, Dozera News emerged from a vision to create a modern, accessible platform for quality journalism. We believe in the power of informed communities and the vital role that local news plays in democracy.</p>
                    
                    <h2>Our Values</h2>
                    <ul>
                        <li><strong>Accuracy:</strong> We verify our sources and fact-check our stories</li>
                        <li><strong>Transparency:</strong> We clearly identify our sources and methods</li>
                        <li><strong>Independence:</strong> We maintain editorial independence from political and commercial interests</li>
                        <li><strong>Community:</strong> We serve the diverse communities of New York City</li>
                    </ul>
                    
                    <h2>Our Team</h2>
                    <p>Our newsroom is staffed by experienced journalists, editors, and digital media professionals who are passionate about serving our readers with excellence.</p>
                    
                    <h2>Contact Us</h2>
                    <p>Have a story tip or feedback? Reach out to us:</p>
                    <ul>
                        <li>Email: news@dozeranews.com</li>
                        <li>Phone: (212) 555-NEWS</li>
                        <li>Address: 123 News Plaza, New York, NY 10001</li>
                    </ul>
                `
            },
            careers: {
                title: "Careers at Dozera News",
                content: `
                    <h2>Join Our Team</h2>
                    <p>At Dozera News, we're always looking for talented individuals who share our passion for quality journalism and community service.</p>
                    
                    <h2>Current Openings</h2>
                    
                    <h3>Senior Reporter - Politics</h3>
                    <p><strong>Location:</strong> New York, NY<br>
                    <strong>Type:</strong> Full-time</p>
                    <p>We're seeking an experienced political reporter to cover NYC politics, including City Hall, state legislature, and federal representation.</p>
                    <ul>
                        <li>5+ years of political reporting experience</li>
                        <li>Strong writing and investigative skills</li>
                        <li>Established source network in NYC politics</li>
                    </ul>
                    
                    <h3>Digital Content Editor</h3>
                    <p><strong>Location:</strong> New York, NY<br>
                    <strong>Type:</strong> Full-time</p>
                    <p>Join our digital team to help shape our online presence and social media strategy.</p>
                    <ul>
                        <li>3+ years of digital media experience</li>
                        <li>SEO and social media expertise</li>
                        <li>Experience with CMS platforms</li>
                    </ul>
                    
                    <h3>Freelance Contributors</h3>
                    <p><strong>Location:</strong> Remote/NYC<br>
                    <strong>Type:</strong> Contract</p>
                    <p>We welcome pitches from freelance writers covering local news, sports, culture, and business.</p>
                    
                    <h2>Benefits</h2>
                    <ul>
                        <li>Competitive salary and benefits package</li>
                        <li>Health, dental, and vision insurance</li>
                        <li>401(k) with company matching</li>
                        <li>Professional development opportunities</li>
                        <li>Flexible work arrangements</li>
                    </ul>
                    
                    <h2>How to Apply</h2>
                    <p>Send your resume, cover letter, and portfolio to <strong>careers@dozeranews.com</strong></p>
                    <p>We are an equal opportunity employer committed to diversity and inclusion.</p>
                `
            },
            privacy: {
                title: "Privacy Policy",
                content: `
                    <p><strong>Last Updated:</strong> December 2024</p>
                    
                    <h2>Information We Collect</h2>
                    <p>We collect information you provide directly to us, such as when you:</p>
                    <ul>
                        <li>Create an account or subscribe to our newsletter</li>
                        <li>Submit articles or comments</li>
                        <li>Contact us with questions or feedback</li>
                        <li>Participate in surveys or promotions</li>
                    </ul>
                    
                    <h2>How We Use Your Information</h2>
                    <p>We use the information we collect to:</p>
                    <ul>
                        <li>Provide, maintain, and improve our services</li>
                        <li>Send you newsletters and updates</li>
                        <li>Respond to your comments and questions</li>
                        <li>Analyze usage patterns to improve user experience</li>
                    </ul>
                    
                    <h2>Information Sharing</h2>
                    <p>We do not sell, trade, or otherwise transfer your personal information to third parties without your consent, except:</p>
                    <ul>
                        <li>To comply with legal obligations</li>
                        <li>To protect our rights and safety</li>
                        <li>With service providers who assist our operations</li>
                    </ul>
                    
                    <h2>Data Security</h2>
                    <p>We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction.</p>
                    
                    <h2>Cookies and Tracking</h2>
                    <p>We use cookies and similar technologies to enhance your browsing experience and analyze site traffic. You can control cookie settings through your browser.</p>
                    
                    <h2>Your Rights</h2>
                    <p>You have the right to:</p>
                    <ul>
                        <li>Access and update your personal information</li>
                        <li>Delete your account and associated data</li>
                        <li>Opt out of marketing communications</li>
                        <li>Request a copy of your data</li>
                    </ul>
                    
                    <h2>Contact Us</h2>
                    <p>If you have questions about this Privacy Policy, contact us at <strong>privacy@dozeranews.com</strong></p>
                `
            },
            terms: {
                title: "Terms & Conditions",
                content: `
                    <p><strong>Last Updated:</strong> December 2024</p>
                    
                    <h2>Acceptance of Terms</h2>
                    <p>By accessing and using Dozera News, you accept and agree to be bound by the terms and provision of this agreement.</p>
                    
                    <h2>Use License</h2>
                    <p>Permission is granted to temporarily download one copy of the materials on Dozera News for personal, non-commercial transitory viewing only.</p>
                    
                    <h2>User Accounts</h2>
                    <p>When you create an account with us, you must provide accurate and complete information. You are responsible for:</p>
                    <ul>
                        <li>Maintaining the confidentiality of your account</li>
                        <li>All activities that occur under your account</li>
                        <li>Notifying us of any unauthorized use</li>
                    </ul>
                    
                    <h2>Content Submission</h2>
                    <p>By submitting content to Dozera News, you grant us:</p>
                    <ul>
                        <li>A non-exclusive license to use, modify, and publish your content</li>
                        <li>The right to edit content for clarity and accuracy</li>
                        <li>The right to remove content that violates our guidelines</li>
                    </ul>
                    
                    <h2>Prohibited Uses</h2>
                    <p>You may not use our service:</p>
                    <ul>
                        <li>For any unlawful purpose or to solicit unlawful acts</li>
                        <li>To violate any international, federal, provincial, or state regulations or laws</li>
                        <li>To transmit or procure the sending of any advertising or promotional material</li>
                        <li>To impersonate or attempt to impersonate the company, employees, or other users</li>
                    </ul>
                    
                    <h2>Disclaimer</h2>
                    <p>The information on this website is provided on an 'as is' basis. To the fullest extent permitted by law, this Company excludes all representations, warranties, conditions and terms.</p>
                    
                    <h2>Limitation of Liability</h2>
                    <p>In no event shall Dozera News or its suppliers be liable for any damages arising out of the use or inability to use the materials on our website.</p>
                    
                    <h2>Governing Law</h2>
                    <p>These terms and conditions are governed by and construed in accordance with the laws of New York State.</p>
                    
                    <h2>Contact Information</h2>
                    <p>Questions about the Terms of Service should be sent to us at <strong>legal@dozeranews.com</strong></p>
                `
            },
            community: {
                title: "Community Guidelines",
                content: `
                    <h2>Our Community Standards</h2>
                    <p>Dozera News is committed to fostering a respectful, inclusive, and constructive community for all users. These guidelines help ensure our platform remains a safe space for meaningful dialogue.</p>
                    
                    <h2>Respectful Communication</h2>
                    <ul>
                        <li>Treat all community members with respect and courtesy</li>
                        <li>Engage in constructive dialogue, even when disagreeing</li>
                        <li>Avoid personal attacks, harassment, or bullying</li>
                        <li>Respect diverse viewpoints and backgrounds</li>
                    </ul>
                    
                    <h2>Content Standards</h2>
                    <h3>Acceptable Content:</h3>
                    <ul>
                        <li>Factual, well-researched articles and comments</li>
                        <li>Constructive criticism and feedback</li>
                        <li>Relevant news tips and story suggestions</li>
                        <li>Educational and informative discussions</li>
                    </ul>
                    
                    <h3>Prohibited Content:</h3>
                    <ul>
                        <li>Hate speech, discrimination, or harassment</li>
                        <li>False information or deliberate misinformation</li>
                        <li>Spam, promotional content, or advertising</li>
                        <li>Content that violates privacy or copyright</li>
                        <li>Threats, violence, or illegal activities</li>
                        <li>Adult content or material harmful to minors</li>
                    </ul>
                    
                    <h2>Article Submission Guidelines</h2>
                    <ul>
                        <li>Submit original content only</li>
                        <li>Verify facts and cite credible sources</li>
                        <li>Write clear, engaging headlines</li>
                        <li>Include relevant tags and categories</li>
                        <li>Proofread for grammar and spelling</li>
                    </ul>
                    
                    <h2>Moderation Policy</h2>
                    <p>Our moderation team reviews content to ensure compliance with these guidelines. We may:</p>
                    <ul>
                        <li>Remove content that violates our guidelines</li>
                        <li>Request revisions before publication</li>
                        <li>Suspend or ban accounts for repeated violations</li>
                        <li>Report illegal activities to appropriate authorities</li>
                    </ul>
                    
                    <h2>Reporting Violations</h2>
                    <p>If you encounter content that violates these guidelines:</p>
                    <ul>
                        <li>Use the report function on the specific content</li>
                        <li>Email us at <strong>community@dozeranews.com</strong></li>
                        <li>Provide specific details about the violation</li>
                    </ul>
                    
                    <h2>Appeals Process</h2>
                    <p>If you believe your content was incorrectly removed or your account was unfairly suspended:</p>
                    <ul>
                        <li>Contact us at <strong>appeals@dozeranews.com</strong></li>
                        <li>Include your username and details of the action</li>
                        <li>Explain why you believe the action was incorrect</li>
                    </ul>
                    
                    <h2>Updates to Guidelines</h2>
                    <p>These guidelines may be updated periodically. Continued use of our platform constitutes acceptance of any changes.</p>
                    
                    <p><strong>Remember:</strong> Building a positive community is everyone's responsibility. Thank you for helping make Dozera News a welcoming place for all.</p>
                `
            }
        };

        // Page Functions
        function showPage(pageId) {
            const page = pageContent[pageId];
            if (!page) return;
            
            document.getElementById('page-title').textContent = page.title;
            document.getElementById('page-content').innerHTML = page.content;
            document.getElementById('page-overlay').classList.remove('hidden');
        }

        function closePage() {
            document.getElementById('page-overlay').classList.add('hidden');
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96d4e28fd6fc4e7b',t:'MTc1NDg4NTQ0NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
